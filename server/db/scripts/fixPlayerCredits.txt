use solaris;

db.games.find({}).forEach(game => {
    let shouldUpdate = false;

    for (let player of game.galaxy.players) {
        if (player.credits % 1 != 0) {
            player.credits = Math.floor(player.credits);
            shouldUpdate = true;
        }

        if (player.creditsSpecialists % 1 != 0) {
            player.creditsSpecialists = Math.floor(player.creditsSpecialists);
            shouldUpdate = true;
        }
    }

    if (shouldUpdate) {
        db.games.save(game);
    }
})
